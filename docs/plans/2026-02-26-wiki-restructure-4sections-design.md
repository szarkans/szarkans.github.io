# Дизайн: Реструктуризация вики → 4 раздела

**Дата:** 2026-02-26
**Статус:** Одобрено пользователем
**Подход:** Подход 2 ("Смелый") из аудита двух агентов
**Ревертируемость:** `git checkout .vitepress/config.mjs` — возврат к исходному состоянию

---

## Проблема

Текущая структура имеет 6 разделов в navbar + внешняя ссылка на карту:

```
О сервере | Геймплей | Бестиарий | Гайды | История | Обновления | [Карта↗]
  14 стр      28 стр     36 стр     12 стр   14 стр    70 стр
```

Ключевые проблемы (из аудита):
- "Гайды" дублируют intent других разделов — 12 стр разбросаны по 4 подгруппам
- `guides/work/*` (4 стр) вообще не видны в сайдбаре
- Пользователь не знает: рыбалка → в "Геймплее" или "Бестиарии"?
- Глубина вложенности в бестиарии = 4 уровня (болезненно на мобильном)
- `bestiary/test.md` доступен по URL в продакшне

---

## Решение: 4 раздела по user intent

```
Начать играть | Механики | История | Обновления
```

### Принцип: организация по вопросу пользователя
- **"Как начать / настроить игру?"** → Начать играть
- **"Как работает X / что такое Y?"** → Механики
- **"Что было на сервере раньше?"** → История
- **"Что изменилось / что нового?"** → Обновления

---

## Структура разделов

### 1. Начать играть (`/info/` + `/guides/`)
Объединяет текущие "О сервере" и "Гайды" под одним nav-пунктом.

Sidebar:
```
Для новичков
  ├── Гайд для новичков           /info/guide
  ├── Частые вопросы              /info/faq
  ├── Правила                     /info/rules/rules
  └── Законы                      /info/rules/laws

Подключение к серверу
  ├── Моды для сервера            /info/mods
  ├── Как скачивать моды?         /guides/tech/mod_download   ← из Гайдов
  ├── Ошибки с модами на Fabric   /guides/tech/mod_errors     ← из Гайдов
  ├── Фикс скинов на ТЛаунчере   /guides/tech/skins_tlauncher ← из Гайдов
  ├── Какой лаунчер выбрать?      /guides/other/launcher      ← из Гайдов
  └── Фермы, ядро сервера         /info/farm

О сервере
  ├── Онлайн-карта                https://map.catcraftmc.ru (external)
  ├── Администрация               /info/admins
  ├── Донатик                     /info/donate
  ├── Префиксы и суффиксы         /info/prefixes
  ├── Брендбук                    /info/brandbook
  └── Словарик                    /info/dict

Другое
  ├── Как редактировать вики?     /guides/other/edit_wiki     ← из Гайдов
  └── [Возможно] Бан-лист / Для СМИ (сейчас закомментированы)
```

Sidebar привязан к URL-паттернам: `/info/` И `/guides/`

---

### 2. Механики (`/gameplay/` + `/bestiary/`)
Объединяет "Геймплей" и "Бестиарий" под одним nav-пунктом.
Две чёткие sidebar-группы первого уровня.

Sidebar:
```
── КАК ИГРАТЬ ──────────────────────────────────────────

Общие механики
  ├── Профиль игрока
  ├── Бартер β
  ├── Система наград
  ├── Котячьи заслуги
  ├── Авторизация для лицензий
  ├── Быстрая смена скина
  ├── Подключение к Дискорду
  └── Маленькие механики

Активности
  ├── Варка напитков
  ├── Рыбалка
  ├── Рисование
  ├── Мебель и декорации
  └── Реалистичные верёвки

Социальное и ролевая система
  ├── Кланы β
  ├── Правительство
  ├── РП роли
  ├── Работа КСБ
  ├── Гайд по ГКСБ                ← guides/work/gksb (сейчас НЕВИДИМ!)
  ├── Гайд Офицера КСБ            ← guides/work/police (сейчас НЕВИДИМ!)
  ├── Гайд Модератора             ← guides/work/moderator (сейчас НЕВИДИМ!)
  └── Гайд Президента             ← guides/work/president_guide (сейчас НЕВИДИМ!)

Моды и команды
  ├── Figura
  ├── Войсчат и диски
  ├── Гардеробная обликов
  └── Команды

Геймплейные гайды
  ├── Как провести ивент?         /guides/gameplay/create_event
  ├── Как сделать разноцветный ник? /guides/gameplay/rgb_nick
  └── Как поставить другой скин?  /guides/gameplay/set_skin

── ЧТО СУЩЕСТВУЕТ ──────────────────────────────────────

Ванилла (изменения)
  ├── Изменения крафтов
  └── Изменения механик

Кастомные предметы
  ├── Крюк-кошка
  ├── Малярная кисть
  ├── Эхо-колокол
  ├── Рация
  ├── Старый автомат
  ├── Детектор аномальной активности
  ├── Котик+
  ├── Модуль CatTrack
  ├── Свиток облика
  ├── UltraDragonblood
  ├── Пустотное зелье
  ├── Котопедии
  ├── Плюшевые игрушки
  ├── Котомат
  ├── Священные писания
  ├── Тренировочный манекен
  ├── Игральные карты
  └── Игральные кости

Блоки и сущности
  ├── Жители Столицы
  ├── Драконья чешуя
  ├── Блок Гычи
  ├── Сжатые блоки
  ├── Укреплённый глубинный сланец
  ├── Блок света
  ├── Невидимые рамки
  ├── Стол декора
  ├── Шкафы и ящики
  ├── Шахматы
  └── Зачарования
```

Sidebar привязан к URL-паттернам: `/gameplay/` И `/bestiary/`

---

### 3. История (`/history/`) — без изменений

Sidebar аналогичен текущему. Контент не трогается.

---

### 4. Обновления (`/updates/`) — без изменений

Sidebar аналогичен текущему. Опционально: переименовать nav-пункт в "7 Сезон".

---

## Что НЕ меняется

- Все файлы остаются на своих местах (нет перемещений)
- Все URL остаются прежними
- Контент страниц не трогается
- История и Обновления не объединяются

---

## Дополнительно: исправить критические баги

- Удалить `bestiary/test.md` (или исключить из sitemap)
- Раскомментировать/добавить `guides/work/*` в sidebar (сейчас невидимы)

---

## Технические детали реализации

**Файл:** `.vitepress/config.mjs`

Изменения:
1. `nav` массив: 6 пунктов → 4 пункта
2. `sidebar` объект: перегруппировать sidebar-конфиги
   - Один sidebar-конфиг для `/info/` + `/guides/` (ключ по обоим паттернам)
   - Один sidebar-конфиг для `/gameplay/` + `/bestiary/` (ключ по обоим паттернам)
   - История и Обновления без изменений

**Откат:** `git checkout .vitepress/config.mjs`

---

## Риски и митигация

| Риск | Вероятность | Митигация |
|------|-------------|-----------|
| Сайдбар "Механики" слишком длинный | Средняя | Использовать `collapsed: true` для подгрупп |
| Пользователи привыкли к старым URL в navbar | Низкая | URL страниц не меняются |
| Навигация кажется перегруженной | Низкая | Тест на реальном деве |
